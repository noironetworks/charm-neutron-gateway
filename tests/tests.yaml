charm_name: neutron-gateway

smoke_bundles:
  - bionic-train

gate_bundles:
  - bionic-train
  - bionic-stein
  - bionic-rocky
  - bionic-queens

dev_bundles: []

configure:
  - zaza.openstack.charm_tests.glance.setup.add_lts_image
  - zaza.openstack.charm_tests.neutron.setup.basic_overcloud_network
  - zaza.openstack.charm_tests.nova.setup.create_flavors
  - zaza.openstack.charm_tests.nova.setup.manage_ssh_key
  - zaza.openstack.charm_tests.keystone.setup.add_demo_user

configure_options:
  configure_gateway_ext_port_use_juju_wait: false

tests:
  - zaza.openstack.charm_tests.neutron.tests.NeutronGatewayDeferredRestartTest
  - zaza.openstack.charm_tests.neutron.tests.NeutronGatewayTest
  - zaza.openstack.charm_tests.neutron.tests.NeutronGatewayShowActionsTest
  - zaza.openstack.charm_tests.neutron.tests.SecurityTest
  - zaza.openstack.charm_tests.neutron.tests.NeutronNetworkingTest
  - zaza.openstack.charm_tests.neutron.tests.NeutronOvsVsctlTest
  - zaza.openstack.charm_tests.neutron.tests.NeutronBridgePortMappingTest

tests_options:
  # NOTE: This allows us to run the NeutronNetworkingTest multiple times while
  # reusing the instances created for the first run. This both saves time and
  # allows verifying instances survive a SDN migration.
  zaza.openstack.charm_tests.neutron.tests.NeutronNetworkingTest.test_instances_have_networking.run_resource_cleanup: false
  force_deploy: []
